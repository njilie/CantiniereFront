<div class="section lb">
  <div class="container-fluid">
    <mat-card>
      <mat-card-content>
        <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
        <div class="container">
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
              <div class="row mb-5 btn btn-link picture" mat-raised-button (click)="openDialog()">
                <span *ngIf="profilePicture">
                  <img [src]="profilePicture" class="img-fluid border rounded-circle shadow-sm p-3 mb-3 bg-white" alt="">
                </span>
                <p  *ngIf="!profilePicture" class="border rounded-circle shadow-sm" style="height: 150px;text-transform: uppercase;font-size: 2em; padding-top: 50px;" >
                  {{initFirstname}}  {{initName}}
                </p>
                <p class="profile-camera"><i class="fa fa-camera"></i></p>
              </div>
              <div style="margin-top: 50px;">
              <div class="row">
                <div class="col-md-5">
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Prénom* :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="text" class="form-control" formControlName="firstname" [(ngModel)]="user.firstname">
                      <mat-hint *ngIf="form.controls['firstname'].hasError('required') && form.controls['firstname'].touched"
                      class="text-danger font-14">
                        Prénom obligatoire
                      </mat-hint>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Email* :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="email" class="form-control" formControlName="email" [(ngModel)]="user.email">
                      <mat-hint *ngIf="form.controls['email'].hasError('required') && form.controls['email'].touched"
                      class="text-danger font-14">
                        Email obligatoire
                      </mat-hint>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Sexe* :</label>
                    </div>
                    <div class="col-md-7">
                      <select class="form-control" formControlName="sex" [(ngModel)]="user.sex">
                        <option value="0">Homme</option>
                        <option value="1">Femme</option>
                        <option value="2">Autre</option>
                      </select>
                      <mat-hint *ngIf="form.controls['sex'].hasError('required') && form.controls['sex'].touched"
                      class="text-danger font-14">
                        Sexe obligatoire
                      </mat-hint>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Adresse :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="text" class="form-control" formControlName="address" [(ngModel)]="user.address" placeholder="21 ALLEE DES BOSQUETS">
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Ville :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="text" class="form-control" formControlName="town" [(ngModel)]="user.town" placeholder="Marseille">
                    </div>
                  </div>
                </div>
                <div class="space" style="width: 15%;"></div>
                <div class="col-md-5">
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Nom* :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="text" class="form-control" formControlName="name" [(ngModel)]="user.name">
                      <mat-hint *ngIf="form.controls['name'].hasError('required') && form.controls['name'].touched"
                      class="text-danger font-14">
                        Nom obligatoire
                      </mat-hint>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Nouveau mot de passe :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="password" class="form-control" formControlName="password" [(ngModel)]="user.password">
                    </div>
                  </div>

                  <div class="form-space"></div>
                  
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Tel :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="tel" class="form-control" formControlName="phone" [(ngModel)]="user.phone"
                      placeholder="0782354512">
                      <mat-hint *ngIf="form.controls['phone'].errors?.pattern && form.controls['phone'].touched"
                      class="text-danger font-14">
                        Format: 0782354512
                      </mat-hint>
                      <mat-hint *ngIf="form.controls['phone'].hasError('minlength') && form.controls['phone'].touched"
                      class="text-danger font-14">
                        Trop court ; format: 0782354512
                      </mat-hint>
                      <mat-hint *ngIf="form.controls['phone'].hasError('maxlength') && form.controls['phone'].touched"
                      class="text-danger font-14">
                        Trop long ; format: 0782354512
                      </mat-hint>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-md-5">
                      <label>Code postal :</label>
                    </div>
                    <div class="col-md-7">
                      <input type="text" class="form-control" formControlName="postalCode" [(ngModel)]="user.postalCode" placeholder="94110">
                      <mat-hint *ngIf="form.controls['postalCode'].errors?.pattern && form.controls['postalCode'].touched"
                      class="text-danger font-14">
                        Format: 75000
                      </mat-hint>
                      <mat-hint *ngIf="form.controls['postalCode'].hasError('minlength') && form.controls['postalCode'].touched"
                      class="text-danger font-14">
                        Trop court ; format: 75000
                      </mat-hint>
                      <mat-hint *ngIf="form.controls['postalCode'].hasError('maxlength') && form.controls['postalCode'].touched"
                      class="text-danger font-14">
                        Trop long ; format: 75000
                      </mat-hint>
                    </div>
                  </div>
                </div>
              </div>
              <button type="submit" class="sim-btn hvr-radial-in">Modifier</button>
            </div>
            </form>
          </div>
        <!-- </div> -->
      </mat-card-content>
    </mat-card>
  </div>
</div>
